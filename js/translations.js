// js/translations.js - Complete version with all required keys for fixing

const translations = {
    en: {
        // Universe navigation
        'universes.prathamanuyoga.name': 'Prathamānuyoga',
        'universes.prathamanuyoga.subtitle': 'Stories & Biographies',
        'universes.prathamanuyoga.description': 'Lives and teachings of Tīrthaṅkaras and great souls',
        
        'universes.karananuyoga.name': 'Karaṇānuyoga',
        'universes.karananuyoga.subtitle': 'Cosmology & Geography',
        'universes.karananuyoga.description': 'Structure of the universe and cosmic principles',
        
        'universes.charananuyoga.name': 'Caraṇānuyoga',
        'universes.charananuyoga.subtitle': 'Conduct & Ethics',
        'universes.charananuyoga.description': 'Rules of conduct for spiritual aspirants',
        
        'universes.dravyanuyoga.name': 'Dravyānuyoga',
        'universes.dravyanuyoga.subtitle': 'Metaphysical Reality',
        'universes.dravyanuyoga.description': 'Fundamental nature of souls, matter, and karma',
        
        'universes.stages': 'Stages: {{count}}',
        'universes.locked': 'Locked',

        // Karma Universe
        'karma.universe.title': 'Karma Universe',
        'karma.journey.title': 'Your Spiritual Journey',
        
        // Stats
        'stats.totalXP': 'Total XP',
        'stats.currentLevel': 'Level',
        'stats.lessonsCompleted': 'Lessons Completed',
        
        // Navigation
        'navigation.backToMap': 'Back to Map',
        'navigation.backToUniverses': 'Back to Universes',
        
        // Actions
        'actions.complete': 'Complete',
        'actions.startGame': 'Start Game',
        'actions.meditate': 'Meditate',
        'actions.anger': 'Get Angry',
        'actions.charity': 'Give Charity',
        
        // Karma Types
        'karma.jnanavarana': 'Jñānāvaraṇa Karma',
        'karma.darshanavarana': 'Darśanāvaraṇa Karma',
        'karma.vedaniya': 'Vedanīya Karma',
        'karma.mohaniya': 'Mohanīya Karma',
        'karma.ayu': 'Āyu Karma',
        'karma.nama': 'Nāma Karma',
        'karma.gotra': 'Gotra Karma',
        'karma.antaraya': 'Antarāya Karma',
        
        // Minigames
        'minigames.karmaCatcher': 'Karma Catcher',
        'minigames.karmaCatcher.instructions': 'Identify which karma is bound by each action. You have 60 seconds!',
        'minigames.karmaFlowSim': 'Karma Flow Simulator',
        'minigames.classificationChallenge': 'Classification Challenge',
        
        // Game Messages
        'game.correct': 'Correct! +10 points',
        'game.incorrect': 'Incorrect. Try again!',
        'game.gameOver': 'Game Over!',
        'game.finalScore': 'Final Score',
        
        // Effects
        'effects.meditation': 'Meditation reduces karma intensity (Apakarṣaṇa)',
        'effects.anger': 'Anger increases karma intensity (Utkarṣaṇa)',
        'effects.charity': 'Charity can transform karma (Saṅkramaṇa)',
        
        // Visualizations
        'visualization.knowledgeObscured': 'Knowledge Obscured by Karmic Veil',
        'visualization.perceptionBlocked': 'Perception Blocked by Karmic Gatekeeper',
        
        // Notifications
        'notifications.lessonComplete': 'Lesson completed! +25 XP earned',
        'notifications.minigameComplete': 'Minigame completed! +50 XP earned',
        'notifications.xpGained': 'XP Gained: +{{amount}}',
        'notifications.levelUp': 'Level Up! You are now level {{level}}',
        
        // Lesson Titles
        'lessons.intro.title': 'Introduction to Karma',
        'lessons.jnanavarana.title': 'Knowledge-Obscuring Karma',
        'lessons.darshanavarana.title': 'Perception-Obscuring Karma',
        'lessons.vedaniya.title': 'Feeling-Producing Karma',
        'lessons.mohaniya.title': 'Deluding Karma',
        'lessons.ayu.title': 'Lifespan-Determining Karma',
        'lessons.nama.title': 'Body-Determining Karma',
        'lessons.gotra.title': 'Status-Determining Karma',
        'lessons.antaraya.title': 'Obstructing Karma',
        
        // Stage 2 Lessons
        'lessons.stage2intro.title': 'Dynamic Nature of Karma',
        'lessons.jobanalogy.title': 'Job Contract Analogy',
        'lessons.corelifecycle.title': 'Core Lifecycle States',
        
        // Karma States
        'karma.states.bandha': 'Bandha (Bondage)',
        'karma.states.sattva': 'Sattva (Existence)',
        'karma.states.udaya': 'Udaya (Fruition)',
        'karma.states.udirana': 'Udīraṇā (Premature Rise)',
        'karma.states.utkarshana': 'Utkarṣaṇa (Intensification)',
        'karma.states.apakrshana': 'Apakarṣaṇa (Attenuation)',
        'karma.states.sankramana': 'Saṅkramaṇa (Transformation)',
        'karma.states.upashama': 'Upaśama (Suppression)',
        'karma.states.nidhatti': 'Nidhatti (Partially Locked)',
        'karma.states.nikachitta': 'Nikācita (Fully Locked)'
    },
    
    hi: {
        // Universe navigation
        'universes.prathamanuyoga.name': 'प्रथमानुयोग',
        'universes.prathamanuyoga.subtitle': 'कथाएं और जीवनियां',
        'universes.prathamanuyoga.description': 'तीर्थंकरों और महापुरुषों के जीवन और शिक्षाएं',
        
        'universes.karananuyoga.name': 'करणानुयोग',
        'universes.karananuyoga.subtitle': 'ब्रह्मांड विज्ञान',
        'universes.karananuyoga.description': 'ब्रह्मांड की संरचना और लौकिक सिद्धांत',
        
        'universes.charananuyoga.name': 'चरणानुयोग',
        'universes.charananuyoga.subtitle': 'आचरण और नीति',
        'universes.charananuyoga.description': 'आध्यात्मिक साधकों के लिए आचरण के नियम',
        
        'universes.dravyanuyoga.name': 'द्रव्यानुयोग',
        'universes.dravyanuyoga.subtitle': 'तत्त्वमीमांसा',
        'universes.dravyanuyoga.description': 'आत्मा, पुद्गल और कर्म की मौलिक प्रकृति',
        
        'universes.stages': 'चरण: {{count}}',
        'universes.locked': 'बंद',

        // Karma Universe
        'karma.universe.title': 'कर्म विश्व',
        'karma.journey.title': 'आपकी आध्यात्मिक यात्रा',
        
        // Stats
        'stats.totalXP': 'कुल अनुभव अंक',
        'stats.currentLevel': 'स्तर',
        'stats.lessonsCompleted': 'पूर्ण किए गए पाठ',
        
        // Navigation
        'navigation.backToMap': 'मानचित्र पर वापस',
        'navigation.backToUniverses': 'विश्वों पर वापस',
        
        // Actions
        'actions.complete': 'पूर्ण करें',
        'actions.startGame': 'खेल शुरू करें',
        'actions.meditate': 'ध्यान करें',
        'actions.anger': 'गुस्सा करें',
        'actions.charity': 'दान दें',
        
        // Karma Types
        'karma.jnanavarana': 'ज्ञानावरण कर्म',
        'karma.darshanavarana': 'दर्शनावरण कर्म',
        'karma.vedaniya': 'वेदनीय कर्म',
        'karma.mohaniya': 'मोहनीय कर्म',
        'karma.ayu': 'आयु कर्म',
        'karma.nama': 'नाम कर्म',
        'karma.gotra': 'गोत्र कर्म',
        'karma.antaraya': 'अंतराय कर्म',
        
        // Minigames
        'minigames.karmaCatcher': 'कर्म पकड़ने वाला',
        'minigames.karmaCatcher.instructions': 'प्रत्येक क्रिया से कौन सा कर्म बंधता है पहचानें। आपके पास 60 सेकंड हैं!',
        'minigames.karmaFlowSim': 'कर्म प्रवाह सिमुलेटर',
        'minigames.classificationChallenge': 'वर्गीकरण चुनौती',
        
        // Game Messages
        'game.correct': 'सही! +10 अंक',
        'game.incorrect': 'गलत। फिर कोशिश करें!',
        'game.gameOver': 'खेल समाप्त!',
        'game.finalScore': 'अंतिम स्कोर',
        
        // Effects
        'effects.meditation': 'ध्यान कर्म की तीव्रता कम करता है (अपकर्षण)',
        'effects.anger': 'गुस्सा कर्म की तीव्रता बढ़ाता है (उत्कर्षण)',
        'effects.charity': 'दान कर्म को रूपांतरित कर सकता है (संक्रमण)',
        
        // Visualizations
        'visualization.knowledgeObscured': 'कार्मिक आवरण से ज्ञान आवृत',
        'visualization.perceptionBlocked': 'कार्मिक द्वारपाल से दर्शन अवरुद्ध',
        
        // Notifications
        'notifications.lessonComplete': 'पाठ पूर्ण! +25 अनुभव अंक मिले',
        'notifications.minigameComplete': 'मिनीगेम पूर्ण! +50 अनुभव अंक मिले',
        'notifications.xpGained': 'अनुभव अंक मिले: +{{amount}}',
        'notifications.levelUp': 'स्तर वृद्धि! अब आप स्तर {{level}} पर हैं',
        
        // Lesson Titles
        'lessons.intro.title': 'कर्म का परिचय',
        'lessons.jnanavarana.title': 'ज्ञानावरण कर्म',
        'lessons.darshanavarana.title': 'दर्शनावरण कर्म',
        'lessons.vedaniya.title': 'वेदनीय कर्म',
        'lessons.mohaniya.title': 'मोहनीय कर्म',
        'lessons.ayu.title': 'आयु कर्म',
        'lessons.nama.title': 'नाम कर्म',
        'lessons.gotra.title': 'गोत्र कर्म',
        'lessons.antaraya.title': 'अंतराय कर्म',
        
        // Stage 2 Lessons
        'lessons.stage2intro.title': 'कर्म की गतिशील प्रकृति',
        'lessons.jobanalogy.title': 'नौकरी अनुबंध उदाहरण',
        'lessons.corelifecycle.title': 'मूल जीवन चक्र अवस्थाएं',
        
        // Karma States
        'karma.states.bandha': 'बंध (बंधन)',
        'karma.states.sattva': 'सत्त्व (अस्तित्व)',
        'karma.states.udaya': 'उदय (फलदान)',
        'karma.states.udirana': 'उदीरणा (पूर्व उदय)',
        'karma.states.utkarshana': 'उत्कर्षण (वृद्धि)',
        'karma.states.apakrshana': 'अपकर्षण (न्यूनता)',
        'karma.states.sankramana': 'संक्रमण (परिवर्तन)',
        'karma.states.upashama': 'उपशम (शमन)',
        'karma.states.nidhatti': 'निधत्ति (आंशिक बंद)',
        'karma.states.nikachitta': 'निकाचित (पूर्ण बंद)'
    }
};

// Enhanced t function with placeholder support
function t(key, params = {}) {
    try {
        const keys = key.split('.');
        let value = translations[currentLanguage] || translations['en'];
        
        for (const k of keys) {
            if (value && typeof value === 'object' && k in value) {
                value = value[k];
            } else {
                // Fallback to English if Hindi translation not found
                value = translations['en'];
                for (const k of keys) {
                    if (value && typeof value === 'object' && k in value) {
                        value = value[k];
                    } else {
                        return key; // Return key if translation not found in any language
                    }
                }
                break;
            }
        }
        
        // Handle placeholders like {{count}}, {{amount}}, etc.
        if (typeof value === 'string' && params) {
            return value.replace(/\{\{(\w+)\}\}/g, (match, paramKey) => {
                return params[paramKey] !== undefined ? params[paramKey] : match;
            });
        }
        
        return value || key;
    } catch (error) {
        console.warn('Translation error for key:', key, error);
        return key;
    }
}
